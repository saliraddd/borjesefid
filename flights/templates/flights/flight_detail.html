{% extends "base.html" %}

{% block title %}Ø¬Ø²Ø¦ÛŒØ§Øª Ù¾Ø±ÙˆØ§Ø²{% endblock %}

{% block content %}
<style>
    .flight-detail-container {
        max-width: 1000px;
        margin: 30px auto;
        padding: 20px;
    }
    
    .detail-header {
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        color: white;
        padding: 30px;
        border-radius: 12px;
        margin-bottom: 30px;
    }
    
    .detail-header h1 {
        margin-bottom: 15px;
    }
    
    .detail-header p {
        opacity: 0.9;
    }
    
    .flight-info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }
    
    .info-card {
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
    }
    
    .info-card h3 {
        color: #2a5298;
        margin-bottom: 15px;
        border-bottom: 2px solid #2a5298;
        padding-bottom: 10px;
    }
    
    .info-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
    }
    
    .info-row:last-child {
        margin-bottom: 0;
    }
    
    .info-label {
        color: #666;
        font-weight: 500;
    }
    
    .info-value {
        color: #333;
        font-weight: 600;
    }
    
    .timeline {
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        margin-bottom: 30px;
    }
    
    .timeline h3 {
        color: #333;
        margin-bottom: 20px;
    }
    
    .timeline-item {
        display: flex;
        gap: 20px;
        margin-bottom: 25px;
        position: relative;
    }
    
    .timeline-item:not(:last-child)::after {
        content: '';
        position: absolute;
        right: 22px;
        top: 60px;
        bottom: -25px;
        width: 2px;
        background: #ddd;
    }
    
    .timeline-dot {
        width: 45px;
        height: 45px;
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        flex-shrink: 0;
    }
    
    .timeline-content {
        flex: 1;
    }
    
    .timeline-time {
        font-weight: 600;
        color: #333;
        margin-bottom: 5px;
    }
    
    .timeline-location {
        color: #666;
        font-size: 0.95em;
    }
    
    .amenities {
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        margin-bottom: 30px;
    }
    
    .amenities h3 {
        color: #333;
        margin-bottom: 20px;
    }
    
    .amenities-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
    }
    
    .amenity-item {
        background: #f9f9f9;
        padding: 15px;
        border-radius: 8px;
        text-align: center;
    }
    
    .amenity-icon {
        font-size: 2em;
        margin-bottom: 10px;
    }
    
    .amenity-name {
        font-weight: 600;
        color: #333;
    }
    
    .booking-section {
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        text-align: center;
    }
    
    .price-display {
        font-size: 2.5em;
        color: #2a5298;
        font-weight: bold;
        margin: 20px 0;
    }
    
    .booking-btn {
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        color: white;
        border: none;
        padding: 15px 40px;
        border-radius: 8px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: transform 0.3s, box-shadow 0.3s;
    }
    
    .booking-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(42, 82, 152, 0.4);
    }
    
    .back-btn {
        background: #ddd;
        color: #333;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
        margin-top: 15px;
    }

    @media (max-width: 768px) {
        .flight-info-grid {
            grid-template-columns: 1fr;
        }
        
        .amenities-grid {
            grid-template-columns: 1fr;
        }
        
        .timeline-item {
            gap: 15px;
        }
    }
</style>

<div class="flight-detail-container">
    <div class="detail-header">
        <h1>âœˆï¸ Ø¬Ø²Ø¦ÛŒØ§Øª Ù¾Ø±ÙˆØ§Ø²</h1>
        <p>{{ flight.origin_city }} â†’ {{ flight.destination_city }}</p>
    </div>
    
    <!-- Flight Information -->
    <div class="flight-info-grid">
        <div class="info-card">
            <h3>ğŸ“‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±ÙˆØ§Ø²</h3>
            <div class="info-row">
                <span class="info-label">Ø´Ù…Ø§Ø±Ù‡ Ù¾Ø±ÙˆØ§Ø²:</span>
                <span class="info-value">{{ flight.flight_number }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Ø§ÛŒØ±Ù„Ø§ÛŒÙ†:</span>
                <span class="info-value">{{ flight.airline }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Ù†ÙˆØ¹ Ù‡ÙˆØ§Ù¾ÛŒÙ…Ø§:</span>
                <span class="info-value">{{ flight.aircraft_type }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">ØªØ§Ø±ÛŒØ®:</span>
                <span class="info-value">{{ flight.departure_time|date:"Y-m-d" }}</span>
            </div>
        </div>
        
        <div class="info-card">
            <h3>ğŸ• Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ</h3>
            <div class="info-row">
                <span class="info-label">Ø³Ø§Ø¹Øª Ù¾Ø±ÙˆØ§Ø²:</span>
                <span class="info-value">{{ flight.departure_time|date:"H:i" }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Ø³Ø§Ø¹Øª ÙØ±ÙˆØ¯:</span>
                <span class="info-value">{{ flight.arrival_time|date:"H:i" }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Ù…Ø¯Øª Ù¾Ø±ÙˆØ§Ø²:</span>
                <span class="info-value">
                    {% with duration=flight.arrival_time|add:"-"|add:flight.departure_time %}
                        Ø­Ø¯ÙˆØ¯ 2 Ø³Ø§Ø¹Øª
                    {% endwith %}
                </span>
            </div>
        </div>
        
        <div class="info-card">
            <h3>ğŸ’º ØµÙ†Ø¯Ù„ÛŒâ€ŒÙ‡Ø§</h3>
            <div class="info-row">
                <span class="info-label">ØµÙ†Ø¯Ù„ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ù„:</span>
                <span class="info-value">{{ flight.total_seats }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">ØµÙ†Ø¯Ù„ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯:</span>
                <span class="info-value" style="color: {% if flight.available_seats > 5 %}#27ae60{% elif flight.available_seats > 0 %}#f39c12{% else %}#e74c3c{% endif %};">
                    {{ flight.available_seats }}
                </span>
            </div>
            <div class="info-row">
                <span class="info-label">Ø¯Ø±ØµØ¯ Ø§Ø´ØºØ§Ù„:</span>
                <span class="info-value">{{ available_percentage }}%</span>
            </div>
        </div>
    </div>
    
    <!-- Timeline -->
    <div class="timeline">
        <h3>ğŸ“ Ù…Ø³ÛŒØ± Ù¾Ø±ÙˆØ§Ø²</h3>
        
        <div class="timeline-item">
            <div class="timeline-dot">ğŸ“</div>
            <div class="timeline-content">
                <div class="timeline-time">{{ flight.departure_time|date:"H:i" }}</div>
                <div class="timeline-location">
                    <strong>{{ flight.origin_city }}</strong> - ÙØ±ÙˆØ¯Ú¯Ø§Ù‡ Ù…Ø¨Ø¯Ø£
                </div>
                <div style="color: #999; font-size: 0.85em; margin-top: 5px;">
                    Ù¾Ø°ÛŒØ±Ø´ Ù…Ø³Ø§ÙØ±Ø§Ù† Ø§Ø² Û² Ø³Ø§Ø¹Øª Ù‚Ø¨Ù„
                </div>
            </div>
        </div>
        
        <div class="timeline-item">
            <div class="timeline-dot">âœˆï¸</div>
            <div class="timeline-content">
                <div class="timeline-time">{{ flight.arrival_time|date:"H:i" }}</div>
                <div class="timeline-location">
                    <strong>{{ flight.destination_city }}</strong> - ÙØ±ÙˆØ¯Ú¯Ø§Ù‡ Ù…Ù‚ØµØ¯
                </div>
                <div style="color: #999; font-size: 0.85em; margin-top: 5px;">
                    ØªØ­ÙˆÛŒÙ„ Ú†Ù…Ø¯Ø§Ù†â€ŒÙ‡Ø§ ØªØ§ 30 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¨Ø¹Ø¯
                </div>
            </div>
        </div>
    </div>
    
    <!-- Amenities -->
    <div class="amenities">
        <h3>ğŸ Ø§Ù…Ú©Ø§Ù†Ø§Øª Ù¾Ø±ÙˆØ§Ø²</h3>
        <div class="amenities-grid">
            <div class="amenity-item">
                <div class="amenity-icon">ğŸ½ï¸</div>
                <div class="amenity-name">Ø®Ø¯Ù…Ø§Øª ØºØ°Ø§ÛŒÛŒ</div>
            </div>
            <div class="amenity-item">
                <div class="amenity-icon">ğŸ“±</div>
                <div class="amenity-name">WiFi Ø±Ø§ÛŒÚ¯Ø§Ù†</div>
            </div>
            <div class="amenity-item">
                <div class="amenity-icon">ğŸ¬</div>
                <div class="amenity-name">Ø³ÛŒÙ†Ù…Ø§ Ùˆ ØªÙØ±ÛŒØ­</div>
            </div>
            <div class="amenity-item">
                <div class="amenity-icon">ğŸ›ï¸</div>
                <div class="amenity-name">Ú©ÛŒÙÛŒØª ØµÙ†Ø¯Ù„ÛŒ</div>
            </div>
            <div class="amenity-item">
                <div class="amenity-icon">ğŸ§</div>
                <div class="amenity-name">ØµØ¯Ø§ÛŒ Ù…Ø­ÛŒØ·</div>
            </div>
            <div class="amenity-item">
                <div class="amenity-icon">â™¿</div>
                <div class="amenity-name">Ø§Ù…Ú©Ø§Ù†Ø§Øª ÙˆÛŒÚ˜Ù‡</div>
            </div>
        </div>
    </div>
    
    <!-- Booking Section -->
    <div class="booking-section">
        <h2>Ø±Ø²Ø±Ùˆ Ø§ÛŒÙ† Ù¾Ø±ÙˆØ§Ø²</h2>
        <p style="color: #666; margin: 10px 0;">{{ flight.origin_city }} â†’ {{ flight.destination_city }}</p>
        <div class="price-display">
            {{ flight.price_per_seat|floatformat:"0" }} ØªÙˆÙ…Ø§Ù†
        </div>
        <p style="color: #666; font-size: 0.9em; margin-bottom: 20px;">Ù‚ÛŒÙ…Øª Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù…Ø³Ø§ÙØ±</p>
        
        {% if flight.available_seats > 0 %}
        <button class="booking-btn" onclick="window.location.href='{% url 'bookings:create_booking' flight.id %}'">
            âœ… Ø±Ø²Ø±Ùˆ Ú©Ù†ÛŒØ¯
        </button>
        {% else %}
        <button class="booking-btn" disabled style="background: #ccc;">
            âŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª
        </button>
        {% endif %}
        
        <button class="back-btn" onclick="window.history.back()">
            Ø¨Ø§Ø²Ú¯Ø´Øª
        </button>
    </div>
</div>
{% endblock %}
