<div class="form-group">
                        <label>مبدأ</label>
                        <select name="origin" class="city-select" required>
                            <option value="">شهر مبدا را انتخاب کنید</option>
                            {% for city in cities %}
                                <option value="{{ city.iata_code }}" {% if request.GET.origin == city.iata_code %}selected{% endif %}>
                                    {{ city.name }} ({{ city.iata_code }})
                                </option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label>مقصد</label>
                        <select name="destination" class="city-select" required>
                            <option value="">شهر مقصد را انتخاب کنید</option>
                            {% for city in cities %}
                                <option value="{{ city.iata_code }}" {% if request.GET.destination == city.iata_code %}selected{% endif %}>
                                    {{ city.name }} ({{ city.iata_code }})
                                </option>
                            {% endfor %}
                        </select>
                    </div>





                    function setupSearchableSelect(selectId) {
            const select = document.getElementById(selectId);
            if (!select) return;

            const options = Array.from(select.options).slice(1); // بدون گزینه اول (placeholder)

            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = 'جستجوی شهر...';
            input.style.cssText = `
                width: 100%;
                padding: 12px;
                border: 1px solid #ddd;
                border-radius: 8px 8px 0 0;
                font-size: 1em;
                margin-bottom: -1px;
                border-bottom: none;
            `;

            const container = document.createElement('div');
            container.style.position = 'relative';
            select.parentNode.insertBefore(container, select);
            container.appendChild(input);
            container.appendChild(select);

            input.addEventListener('input', function() {
                const search = this.value.toLowerCase();
                select.innerHTML = '<option value="">شهر را جستجو و انتخاب کنید</option>';

                const filtered = options.filter(option => 
                    option.text.toLowerCase().includes(search)
                );

                filtered.forEach(option => select.appendChild(option.cloneNode(true)));

                // اگر چیزی پیدا نشد
                if (filtered.length === 0) {
                    const noResult = document.createElement('option');
                    noResult.textContent = 'شهر یافت نشد';
                    noResult.disabled = true;
                    select.appendChild(noResult);
                }
            });

            // وقتی کاربر روی input کلیک کرد، dropdown باز بشه
            input.addEventListener('focus', () => select.focus());
        }

        // فعال کردن برای مبدا و مقصد
        setupSearchableSelect('origin-select');
        setupSearchableSelect('destination-select');